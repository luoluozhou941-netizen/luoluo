<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Blush Mist · 粉雾手机 - 无边框应用</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Arial', sans-serif;
            background-color: #e6d6df;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
            transition: background-color 0.3s ease;
        }
        
        body.fullscreen-body {
            background: linear-gradient(160deg, #f8e8f0 0%, #e8d8e8 50%, #d8c8e0 100%);
            padding: 0;
            margin: 0;
            overflow: hidden;
        }
        
        :root {
            --primary-pink: #d8a3bb;
            --primary-purple: #9a8bbd;
            --primary-blue: #7aa9c6;
            --primary-deep: #8a6b7d;
            --bg-light: #f8f5f7;
            --bg-lighter: #fff5fa;
            --bg-content: #ffffff;
            --text-dark: #5a4a52;
            --text-medium: #8a6b7d;
            --text-light: #b8a6b1;
            --border-color: #e6d6e1;
            --shadow-light: rgba(138, 107, 125, 0.1);
            --shadow-medium: rgba(138, 107, 125, 0.2);
            --shadow-strong: rgba(138, 107, 125, 0.3);
            --period-red: #e8a3bb;
            --period-bg: rgba(232, 163, 187, 0.15);
            --ovulation-purple: #9a8bbd;
            --safe-blue: #7aa9c6;
        }
        
        .phone-container {
            width: 320px;
            height: 640px;
            background-color: #f0e6ed;
            border-radius: 40px;
            box-shadow: 
                0 20px 40px var(--shadow-strong),
                0 0 0 12px var(--bg-light),
                0 0 0 14px #d8c9d2;
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
            border: 2px solid #d8c9d2;
        }
        
        .phone-container.unlocked {
            box-shadow: 
                0 20px 40px rgba(138, 107, 125, 0.25),
                0 0 0 12px var(--bg-light),
                0 0 0 14px #c8b9c2;
        }

        /* 全屏模式 - 等比例缩放 */
        .phone-container.fullscreen {
            width: 320px;
            height: 640px;
            border-radius: 0;
            box-shadow: none;
            border: none;
            background-color: #f0e6ed;
            position: fixed;
            top: 50%;
            left: 50%;
            transform-origin: center center;
            z-index: 9999;
        }
        
        .phone-container.fullscreen .notch,
        .phone-container.fullscreen .phone-button,
        .phone-container.fullscreen .home-button {
            display: none;
        }
        
        .phone-container.fullscreen .status-bar {
            /* 跟随整体缩放，不需要特殊处理 */
        }
        
        .phone-container.fullscreen .screen {
            height: calc(100% - 28px);
        }
        
        .status-bar {
            height: 28px;
            background-color: var(--bg-light);
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 20px;
            font-size: 12px;
            font-weight: bold;
            color: var(--text-medium);
            border-bottom: 1px solid var(--border-color);
            position: relative;
            z-index: 2;
            cursor: pointer;
            -webkit-tap-highlight-color: transparent;
            touch-action: manipulation;
        }
        
        .status-bar .time:hover {
            color: var(--primary-pink);
            transition: color 0.2s ease;
        }
        
        .time {
            font-weight: bold;
            color: var(--primary-deep);
            transition: color 0.2s ease;
        }
        
        .status-icons i {
            margin-left: 5px;
            color: var(--primary-pink);
        }
        
        .screen {
            height: calc(100% - 28px);
            background: linear-gradient(160deg, #f8e8f0 0%, #e8d8e8 50%, #d8c8e0 100%);
            overflow-y: auto;
            position: relative;
            -webkit-overflow-scrolling: touch;
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
        
        .screen::-webkit-scrollbar {
            display: none;
        }
        
        .home-screen {
            min-height: 100%;
            padding: 15px 20px 80px;
            display: flex;
            flex-direction: column;
            transition: opacity 0.3s ease;
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
        
        .home-screen::-webkit-scrollbar {
            display: none;
        }
        
        /* 设置页面样式 */
        .settings-screen {
            min-height: 100%;
            padding: 15px 20px 80px;
            display: flex;
            flex-direction: column;
            opacity: 0;
            pointer-events: none;
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(160deg, #f8e8f0 0%, #e8d8e8 50%, #d8c8e0 100%);
            transform: translateX(100%);
            transition: transform 0.3s ease, opacity 0.3s ease;
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
        
        .settings-screen::-webkit-scrollbar {
            display: none;
        }
        
        .settings-screen.active {
            opacity: 1;
            pointer-events: auto;
            transform: translateX(0);
        }
        
        .settings-header {
            display: flex;
            align-items: center;
            margin-bottom: 25px;
            padding-top: 10px;
        }
        
        .back-button {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: rgba(255, 255, 255, 0.85);
            border: 1.5px solid rgba(255, 255, 255, 0.8);
            cursor: pointer;
            margin-right: 15px;
            box-shadow: 0 2px 8px rgba(138, 107, 125, 0.1);
            -webkit-tap-highlight-color: transparent;
            touch-action: manipulation;
        }
        
        .back-button i {
            color: var(--primary-pink);
            font-size: 16px;
        }
        
        .settings-title {
            font-size: 24px;
            font-weight: bold;
            color: var(--text-dark);
        }
        
        .settings-section {
            background-color: rgba(255, 255, 255, 0.85);
            backdrop-filter: blur(8px);
            -webkit-backdrop-filter: blur(8px);
            border-radius: 18px;
            padding: 20px;
            margin-bottom: 20px;
            border: 1.5px solid rgba(255, 255, 255, 0.8);
            box-shadow: 0 4px 12px var(--shadow-light);
        }
        
        .section-title {
            font-size: 16px;
            font-weight: 600;
            color: var(--text-dark);
            margin-bottom: 18px;
            display: flex;
            align-items: center;
        }
        
        .section-title i {
            margin-right: 10px;
            color: var(--primary-pink);
            font-size: 18px;
        }
        
        .settings-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 16px 0;
            border-bottom: 1px solid rgba(232, 163, 187, 0.1);
            cursor: pointer;
            transition: background-color 0.2s ease;
            border-radius: 8px;
            padding-left: 10px;
            padding-right: 10px;
        }
        
        .settings-item:last-child {
            border-bottom: none;
        }
        
        .settings-item:hover {
            background-color: rgba(232, 163, 187, 0.08);
        }
        
        .item-content {
            display: flex;
            align-items: center;
        }
        
        .item-icon {
            width: 36px;
            height: 36px;
            border-radius: 10px;
            background-color: rgba(232, 163, 187, 0.15);
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 12px;
        }
        
        .item-icon i {
            color: var(--period-red);
            font-size: 16px;
        }
        
        .item-text {
            display: flex;
            flex-direction: column;
        }
        
        .item-name {
            font-size: 15px;
            color: var(--text-dark);
            font-weight: 500;
            margin-bottom: 3px;
        }
        
        .item-desc {
            font-size: 12px;
            color: var(--text-medium);
        }
        
        .item-control {
            display: flex;
            align-items: center;
        }
        
        .switch {
            position: relative;
            display: inline-block;
            width: 50px;
            height: 26px;
        }
        
        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        
        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 34px;
        }
        
        .slider:before {
            position: absolute;
            content: "";
            height: 20px;
            width: 20px;
            left: 3px;
            bottom: 3px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }
        
        input:checked + .slider {
            background-color: var(--primary-pink);
        }
        
        input:checked + .slider:before {
            transform: translateX(24px);
        }
        
        .value-text {
            font-size: 14px;
            color: var(--text-medium);
            font-weight: 500;
        }
        
        .arrow-icon {
            color: var(--text-light);
            font-size: 14px;
        }
        
        .grid-unit {
            width: 65px;
            height: 65px;
        }
        
        .content-area {
            width: 280px;
            margin: 0 auto;
        }
        
        .widget-large {
            width: 280px;
            height: 130px;
            margin-bottom: 15px;
        }
        
        .app-icon-borderless {
            width: 65px;
            height: 65px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: var(--text-dark);
            transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            text-align: center;
            cursor: pointer;
            padding: 5px 0;
            position: relative;
            border-radius: 12px;
            -webkit-tap-highlight-color: transparent;
            touch-action: manipulation;
        }
        
        .app-icon-borderless i {
            font-size: 22px;
            margin-bottom: 4px;
            color: var(--primary-pink);
            transition: all 0.3s ease;
        }
        
        .app-icon-borderless span {
            font-size: 11px;
            font-weight: 500;
            line-height: 1.1;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            width: 100%;
            padding: 0 2px;
            max-width: 58px;
            color: var(--text-dark);
            transition: color 0.3s ease;
        }
        
        .app-icon-borderless:hover {
            background-color: rgba(216, 163, 187, 0.15);
            transform: translateY(-3px) scale(1.05);
        }
        
        .app-icon-borderless:hover i {
            transform: scale(1.1);
            color: var(--period-red);
        }
        
        .app-icon-borderless:hover span {
            color: var(--primary-deep);
        }
        
        .app-icon-borderless.active {
            background-color: rgba(216, 163, 187, 0.2);
        }
        
        .app-icon-borderless.active i {
            color: var(--period-red);
            transform: scale(1.05);
        }
        
        .app-icon-borderless:active {
            transform: scale(0.95);
        }
        
        .app-grid {
            display: grid;
            grid-template-columns: repeat(4, 65px);
            grid-template-rows: repeat(4, 65px);
            gap: 6.67px;
            justify-content: center;
            margin-top: 60px;
        }
        
        .anniversary-widget {
            background-color: rgba(255, 255, 255, 0.85);
            backdrop-filter: blur(8px);
            -webkit-backdrop-filter: blur(8px);
            border-radius: 20px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            box-shadow: 
                0 4px 12px var(--shadow-light),
                inset 0 0 0 1px rgba(255, 255, 255, 0.6);
            padding: 12px;
            border: 1.5px solid rgba(255, 255, 255, 0.8);
        }
        
        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            width: 100%;
            margin-bottom: 10px;
        }
        
        .card-name {
            font-size: 15px;
            color: var(--text-dark);
            font-weight: 500;
        }
        
        .card-tag {
            font-size: 10px;
            color: #FFFFFF;
            background-color: var(--primary-pink);
            padding: 3px 8px;
            border-radius: 10px;
            font-weight: 500;
        }
        
        .countdown {
            display: flex;
            gap: 6px;
            justify-content: center;
            margin-bottom: 6px;
        }
        
        .countdown-item {
            text-align: center;
        }
        
        .countdown-num {
            width: 32px;
            height: 32px;
            background-color: rgba(255, 255, 255, 0.9);
            border-radius: 8px;
            line-height: 32px;
            font-size: 13px;
            color: var(--primary-deep);
            font-weight: bold;
            margin-bottom: 3px;
            border: 1px solid var(--border-color);
            box-shadow: 0 2px 4px rgba(138, 107, 125, 0.1);
        }
        
        .countdown-text {
            font-size: 8px;
            color: var(--text-medium);
        }
        
        .card-info {
            text-align: center;
            font-size: 10px;
            color: var(--text-medium);
            margin-top: 4px;
        }
        
        .period-square-widget {
            width: 135px;
            height: 135px;
            background: rgba(255, 255, 255, 0.85);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border-radius: 20px;
            border: 1.5px solid rgba(255, 255, 255, 0.9);
            box-shadow: 
                0 4px 12px rgba(138, 107, 125, 0.15),
                inset 0 0 0 1px rgba(232, 163, 187, 0.1);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 12px;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.22, 0.61, 0.36, 1);
            position: relative;
            overflow: hidden;
            transform-origin: center center;
            grid-column: 1 / span 2;
            grid-row: 1 / span 2;
            -webkit-tap-highlight-color: transparent;
            touch-action: manipulation;
        }
        
        .period-square-widget::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, 
                rgba(232, 163, 187, 0.08) 0%, 
                rgba(232, 163, 187, 0.04) 50%, 
                rgba(255, 255, 255, 0) 100%);
            z-index: -1;
        }
        
        .period-square-widget:hover {
            transform: translateY(-3px) scale(1.02);
            box-shadow: 
                0 8px 24px rgba(138, 107, 125, 0.2),
                inset 0 0 0 1px rgba(232, 163, 187, 0.2);
            border-color: rgba(232, 163, 187, 0.3);
        }
        
        .period-square-widget.active {
            background: rgba(232, 163, 187, 0.12);
        }
        
        .kyocera-droplet-icon {
            font-size: 32px;
            color: var(--period-red);
            filter: drop-shadow(0 2px 3px rgba(232, 163, 187, 0.4));
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            height: 40px;
        }
        
        .period-status-area-square {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-bottom: 6px;
            width: 100%;
        }
        
        .period-status-correct {
            font-size: 14px;
            font-weight: 700;
            color: var(--text-dark);
            margin-bottom: 2px;
            text-align: center;
            line-height: 1.2;
        }
        
        .period-day-correct {
            font-size: 12px;
            color: var(--text-medium);
            font-weight: 500;
            text-align: center;
            line-height: 1.2;
        }
        
        .period-info-area-square {
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 100%;
            gap: 4px;
        }
        
        .period-next-correct {
            font-size: 11px;
            color: var(--text-medium);
            text-align: center;
            line-height: 1.2;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            width: 100%;
        }
        
        .period-countdown-correct {
            font-size: 10px;
            color: #FFFFFF;
            font-weight: 600;
            background: var(--primary-pink);
            padding: 3px 8px;
            border-radius: 8px;
            border: 1px solid rgba(216, 163, 187, 0.2);
            text-align: center;
            line-height: 1.2;
            white-space: nowrap;
            box-shadow: 0 2px 4px rgba(216, 163, 187, 0.2);
        }
        
        .badge-widget-large {
            width: 135px;
            height: 135px;
            border-radius: 50%;
            background: linear-gradient(135deg, #f5f5f5 25%, #e0e0e0 100%);
            background-image: url('https://images.unsplash.com/photo-1533738363-b7f9aef128ce?w=300&h=300&fit=crop');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            box-shadow: 
                0 6px 12px rgba(138, 107, 125, 0.15),
                inset 0 0 0 2px rgba(138, 107, 125, 0.1),
                inset 0 -12px 30px rgba(255, 255, 255, 0.1),
                inset 0 12px 30px rgba(255, 255, 255, 0.95),
                inset 0 20px 40px rgba(255, 255, 255, 0.8),
                inset 0 -20px 40px rgba(138, 107, 125, 0.2);
            cursor: pointer;
            transition: transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            position: relative;
            transform: perspective(1000px) rotateX(8deg);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            grid-column: 3 / span 2;
            grid-row: 3 / span 2;
            -webkit-tap-highlight-color: transparent;
            touch-action: manipulation;
        }
        
        .badge-widget-large::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border-radius: 50%;
            background: radial-gradient(circle at 50% 40%, transparent 40%, rgba(255, 255, 255, 0.2) 80%, rgba(255, 255, 255, 0.1) 100%);
            pointer-events: none;
            z-index: 1;
        }
        
        .badge-widget-large:hover {
            transform: perspective(1000px) rotateX(8deg) scale(1.1) rotate(2deg);
            box-shadow: 
                0 8px 16px rgba(138, 107, 125, 0.2),
                inset 0 0 0 2px rgba(138, 107, 125, 0.12),
                inset 0 -15px 35px rgba(255, 255, 255, 0.15),
                inset 0 15px 35px rgba(255, 255, 255, 0.98),
                inset 0 25px 45px rgba(255, 255, 255, 0.85),
                inset 0 -25px 45px rgba(138, 107, 125, 0.25);
        }
        
        .ink-navbar {
            position: absolute;
            bottom: 10px;
            left: 10px;
            right: 10px;
            height: 70px;
            background: rgba(255, 255, 255, 0.85);
            backdrop-filter: blur(15px);
            -webkit-backdrop-filter: blur(15px);
            border-radius: 18px;
            display: flex;
            justify-content: space-around;
            align-items: center;
            padding: 0 15px;
            box-shadow: 
                0 4px 20px rgba(138, 107, 125, 0.1),
                0 1px 2px rgba(138, 107, 125, 0.05),
                inset 0 1px 0 rgba(255, 255, 255, 0.8);
            border: 1.5px solid rgba(255, 255, 255, 0.6);
            z-index: 1;
        }
        
        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            width: 60px;
            height: 60px;
            border-radius: 16px;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            position: relative;
            background-color: transparent;
            border: none;
            -webkit-tap-highlight-color: transparent;
            touch-action: manipulation;
        }
        
        .nav-icon i {
            font-size: 20px;
            color: var(--primary-deep);
            transition: all 0.3s ease;
        }
        
        .nav-item:hover .nav-icon i {
            transform: scale(1.1);
            color: var(--primary-pink);
        }
        
        .nav-item:hover {
            background-color: rgba(216, 163, 187, 0.1);
        }
        
        .nav-item.active .nav-icon i {
            transform: scale(1.05);
            color: var(--primary-pink);
        }
        
        .nav-item.active {
            background-color: rgba(216, 163, 187, 0.15);
        }
        
        .nav-name {
            font-size: 10px;
            font-weight: 600;
            color: var(--text-medium);
            margin-top: 4px;
            line-height: 1.1;
            text-align: center;
            max-width: 100%;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }
        
        .notch {
            position: absolute;
            top: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 160px;
            height: 25px;
            background-color: var(--bg-light);
            border-bottom-left-radius: 15px;
            border-bottom-right-radius: 15px;
            z-index: 3;
            display: flex;
            justify-content: center;
            align-items: flex-end;
            padding-bottom: 5px;
            border-bottom: 1px solid var(--border-color);
        }
        
        .notch-camera {
            width: 10px;
            height: 10px;
            background-color: var(--primary-pink);
            border-radius: 50%;
            margin-right: 10px;
        }
        
        .notch-speaker {
            width: 60px;
            height: 6px;
            background-color: var(--border-color);
            border-radius: 3px;
        }
        
        .lock-screen {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at bottom right, #f8e8f0, #e8d8e8);
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            align-items: center;
            padding: 60px 20px 40px;
            z-index: 10;
            transition: transform 0.5s cubic-bezier(0.22, 0.61, 0.36, 1);
        }
        
        .lock-content {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-top: 80px;
        }
        
        .lock-time {
            font-size: 56px;
            font-weight: bold;
            color: var(--primary-deep);
            margin-bottom: 10px;
        }
        
        .lock-date {
            font-size: 18px;
            color: var(--text-medium);
            opacity: 0.9;
        }
        
        .unlock-area {
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 100%;
        }
        
        .unlock-slider {
            width: 250px;
            height: 50px;
            background-color: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(8px);
            -webkit-backdrop-filter: blur(8px);
            border-radius: 25px;
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: 20px;
            cursor: pointer;
            border: 1.5px solid rgba(255, 255, 255, 0.8);
            color: var(--text-dark);
            transition: transform 0.3s;
            box-shadow: 0 4px 12px rgba(138, 107, 125, 0.1);
            -webkit-tap-highlight-color: transparent;
            touch-action: manipulation;
        }
        
        .unlock-slider i {
            margin-right: 10px;
            color: var(--primary-pink);
        }
        
        .lock-screen.hidden {
            transform: translateY(-100%);
        }
        
        .phone-button {
            position: absolute;
            border-radius: 2px;
        }
        
        .power-button {
            width: 4px;
            height: 40px;
            right: -4px;
            top: 120px;
            background-color: #d8c9d2;
        }
        
        .volume-up {
            width: 4px;
            height: 25px;
            right: -4px;
            top: 180px;
            background-color: #d8c9d2;
        }
        
        .volume-down {
            width: 4px;
            height: 25px;
            right: -4px;
            top: 220px;
            background-color: #d8c9d2;
        }
        
        .home-button {
            width: 55px;
            height: 55px;
            background-color: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(8px);
            -webkit-backdrop-filter: blur(8px);
            border-radius: 50%;
            bottom: 15px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 20px;
            cursor: pointer;
            border: 1.5px solid rgba(255, 255, 255, 0.8);
            z-index: 2;
            box-shadow: 0 4px 12px rgba(138, 107, 125, 0.15);
            -webkit-tap-highlight-color: transparent;
            touch-action: manipulation;
        }
        
        .home-button i {
            color: var(--primary-pink);
        }
        
        .badge-upload {
            display: none;
        }
        
        .uploading {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: var(--text-dark);
            font-size: 12px;
            font-weight: bold;
            background: rgba(255, 255, 255, 0.8);
            padding: 4px 10px;
            border-radius: 10px;
            z-index: 3;
            display: none;
            backdrop-filter: blur(4px);
            -webkit-backdrop-filter: blur(4px);
            border: 1px solid rgba(255, 255, 255, 0.6);
        }
        
        .brand-text {
            color: var(--text-medium);
            font-size: 12px;
            margin-top: 5px;
        }
        
        /* AO3专属图标样式 */
        .ao3-icon {
            background: linear-gradient(135deg, #ff6b6b, #ff8e8e);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }
        
        /* 黑箱专属图标样式 */
        .blackbox-icon {
            color: #5a4a52;
        }
    </style>
</head>
<body>
    <div class="phone-container" id="phoneContainer">
        <div class="notch">
            <div class="notch-camera"></div>
            <div class="notch-speaker"></div>
        </div>
        
        <div class="lock-screen" id="lockScreen">
            <div class="lock-content">
                <div class="lock-time" id="lockTime">13:20</div>
                <div class="lock-date" id="lockDate">星期三, 9月20日</div>
            </div>
            
            <div class="unlock-area">
                <div class="unlock-slider" id="unlockSlider">
                    <i class="fas fa-chevron-up"></i>
                    <span>滑动解锁</span>
                </div>
                <div class="brand-text">Blush Mist · 粉雾手机</div>
            </div>
        </div>
        
        <div class="status-bar" id="statusBar">
            <div class="time" id="currentTime">13:20</div>
            <div class="status-icons">
                <i class="fas fa-signal"></i>
                <i class="fas fa-wifi"></i>
                <i class="fas fa-battery-three-quarters"></i>
            </div>
        </div>
        
        <div class="screen">
            <!-- 主页 -->
            <div class="home-screen" id="homeScreen">
                <div class="widget-large anniversary-widget" id="anniversary-widget">
                    <div class="card-header">
                        <div class="card-name" id="name">纪念日</div>
                        <div class="card-tag" id="tag">倒数日</div>
                    </div>
                    <div class="countdown">
                        <div class="countdown-item">
                            <div class="countdown-num" id="d">161</div>
                            <div class="countdown-text">天</div>
                        </div>
                        <div class="countdown-item">
                            <div class="countdown-num" id="h">18</div>
                            <div class="countdown-text">时</div>
                        </div>
                        <div class="countdown-item">
                            <div class="countdown-num" id="m">39</div>
                            <div class="countdown-text">分</div>
                        </div>
                        <div class="countdown-item">
                            <div class="countdown-num" id="s">59</div>
                            <div class="countdown-text">秒</div>
                        </div>
                    </div>
                    <div class="card-info" id="date">目标日期: 2026-06-18</div>
                </div>
                
                <div class="app-grid">
                    <!-- 左上：经期助手2×2方形小组件 -->
                    <div class="period-square-widget" id="period-square-widget">
                        <div class="kyocera-droplet-icon">
                            <i class="fas fa-tint"></i>
                        </div>
                        
                        <div class="period-status-area-square">
                            <div class="period-status-correct" id="period-status">经期中</div>
                            <div class="period-day-correct" id="period-day">第3天</div>
                        </div>
                        
                        <div class="period-info-area-square">
                            <div class="period-next-correct" id="period-next">下次: 9月28日</div>
                            <div class="period-countdown-correct" id="period-countdown">还有14天</div>
                        </div>
                    </div>
                    
                    <!-- 右上：4个APP图标 -->
                    <div class="app-icon-borderless" data-app="calendar" style="grid-column: 3; grid-row: 1;">
                        <i class="fas fa-calendar-alt"></i>
                        <span>日历</span>
                    </div>
                    <div class="app-icon-borderless" data-app="health" style="grid-column: 4; grid-row: 1;">
                        <i class="fas fa-heartbeat"></i>
                        <span>健康</span>
                    </div>
                    <div class="app-icon-borderless" data-app="ao3" style="grid-column: 3; grid-row: 2;">
                        <i class="fas fa-book-open ao3-icon"></i>
                        <span>AO3</span>
                    </div>
                    <div class="app-icon-borderless" data-app="music" style="grid-column: 4; grid-row: 2;">
                        <i class="fas fa-music"></i>
                        <span>音乐</span>
                    </div>
                    
                    <!-- 左下：4个APP图标 -->
                    <div class="app-icon-borderless" data-app="worldbook" style="grid-column: 1; grid-row: 3;">
                        <i class="fas fa-globe-americas"></i>
                        <span>世界书</span>
                    </div>
                    <div class="app-icon-borderless" data-app="blackbox" style="grid-column: 2; grid-row: 3;">
                        <i class="fas fa-cube blackbox-icon"></i>
                        <span>黑箱</span>
                    </div>
                    <div class="app-icon-borderless" data-app="starselect" style="grid-column: 1; grid-row: 4;">
                        <i class="fas fa-star"></i>
                        <span>星选</span>
                    </div>
                    <div class="app-icon-borderless" data-app="timelog" style="grid-column: 2; grid-row: 4;">
                        <i class="fas fa-clock"></i>
                        <span>时录</span>
                    </div>
                    
                    <!-- 右下角：2×2圆形吧唧小组件 -->
                    <div class="badge-widget-large" id="badge-large-widget">
                        <div class="uploading" id="badgeUploading">上传中...</div>
                    </div>
                </div>
                
                <input type="file" class="badge-upload" id="badgeUploadInput" accept="image/*">
            </div>
            
            <!-- 设置页面 -->
            <div class="settings-screen" id="settingsScreen">
                <div class="settings-header">
                    <div class="back-button" id="backButton">
                        <i class="fas fa-chevron-left"></i>
                    </div>
                    <div class="settings-title">设置</div>
                </div>
                
                <!-- 账户与同步 -->
                <div class="settings-section">
                    <div class="section-title">
                        <i class="fas fa-user-circle"></i>
                        账户与同步
                    </div>
                    <div class="settings-item" id="accountSetting">
                        <div class="item-content">
                            <div class="item-icon">
                                <i class="fas fa-user"></i>
                            </div>
                            <div class="item-text">
                                <div class="item-name">账户管理</div>
                                <div class="item-desc">登录、注销和管理账户</div>
                            </div>
                        </div>
                        <div class="item-control">
                            <i class="fas fa-chevron-right arrow-icon"></i>
                        </div>
                    </div>
                    <div class="settings-item" id="syncSetting">
                        <div class="item-content">
                            <div class="item-icon">
                                <i class="fas fa-sync-alt"></i>
                            </div>
                            <div class="item-text">
                                <div class="item-name">数据同步</div>
                                <div class="item-desc">自动同步应用数据</div>
                            </div>
                        </div>
                        <div class="item-control">
                            <label class="switch">
                                <input type="checkbox" id="syncToggle" checked>
                                <span class="slider"></span>
                            </label>
                        </div>
                    </div>
                    <div class="settings-item" id="privacySetting">
                        <div class="item-content">
                            <div class="item-icon">
                                <i class="fas fa-shield-alt"></i>
                            </div>
                            <div class="item-text">
                                <div class="item-name">隐私保护</div>
                                <div class="item-desc">管理个人数据隐私</div>
                            </div>
                        </div>
                        <div class="item-control">
                            <i class="fas fa-chevron-right arrow-icon"></i>
                        </div>
                    </div>
                </div>
                
                <!-- 网络与连接 -->
                <div class="settings-section">
                    <div class="section-title">
                        <i class="fas fa-wifi"></i>
                        网络与连接
                    </div>
                    <div class="settings-item" id="apiSetting">
                        <div class="item-content">
                            <div class="item-icon">
                                <i class="fas fa-code"></i>
                            </div>
                            <div class="item-text">
                                <div class="item-name">API 网络设置</div>
                                <div class="item-desc">配置API接口和网络连接</div>
                            </div>
                        </div>
                        <div class="item-control">
                            <i class="fas fa-chevron-right arrow-icon"></i>
                        </div>
                    </div>
                    <div class="settings-item" id="asrSetting">
                        <div class="item-content">
                            <div class="item-icon">
                                <i class="fas fa-microphone-alt"></i>
                            </div>
                            <div class="item-text">
                                <div class="item-name">ASR 服务</div>
                                <div class="item-desc">自动语音识别API配置</div>
                            </div>
                        </div>
                        <div class="item-control">
                            <i class="fas fa-chevron-right arrow-icon"></i>
                        </div>
                    </div>
                    <div class="settings-item" id="ttsSetting">
                        <div class="item-content">
                            <div class="item-icon">
                                <i class="fas fa-volume-up"></i>
                            </div>
                            <div class="item-text">
                                <div class="item-name">TTS 服务</div>
                                <div class="item-desc">文本转语音API配置</div>
                            </div>
                        </div>
                        <div class="item-control">
                            <i class="fas fa-chevron-right arrow-icon"></i>
                        </div>
                    </div>
                    <div class="settings-item" id="owmSetting">
                        <div class="item-content">
                            <div class="item-icon">
                                <i class="fas fa-cloud-sun"></i>
                            </div>
                            <div class="item-text">
                                <div class="item-name">OWM 天气服务</div>
                                <div class="item-desc">OpenWeatherMap API配置</div>
                            </div>
                        </div>
                        <div class="item-control">
                            <i class="fas fa-chevron-right arrow-icon"></i>
                        </div>
                    </div>
                    <div class="settings-item" id="mtSetting">
                        <div class="item-content">
                            <div class="item-icon">
                                <i class="fas fa-language"></i>
                            </div>
                            <div class="item-text">
                                <div class="item-name">MT 翻译服务</div>
                                <div class="item-desc">机器翻译API配置</div>
                            </div>
                        </div>
                        <div class="item-control">
                            <i class="fas fa-chevron-right arrow-icon"></i>
                        </div>
                    </div>
                    <div class="settings-item" id="pushSetting">
                        <div class="item-content">
                            <div class="item-icon">
                                <i class="fas fa-bell"></i>
                            </div>
                            <div class="item-text">
                                <div class="item-name">PUSH 推送服务</div>
                                <div class="item-desc">推送通知API配置</div>
                            </div>
                        </div>
                        <div class="item-control">
                            <i class="fas fa-chevron-right arrow-icon"></i>
                        </div>
                    </div>
                </div>
                
                <!-- 显示与主题 -->
                <div class="settings-section">
                    <div class="section-title">
                        <i class="fas fa-palette"></i>
                        显示与主题
                    </div>
                    <div class="settings-item" id="darkModeSetting">
                        <div class="item-content">
                            <div class="item-icon">
                                <i class="fas fa-moon"></i>
                            </div>
                            <div class="item-text">
                                <div class="item-name">深色模式</div>
                                <div class="item-desc">根据时间自动切换</div>
                            </div>
                        </div>
                        <div class="item-control">
                            <label class="switch">
                                <input type="checkbox" id="darkModeToggle">
                                <span class="slider"></span>
                            </label>
                        </div>
                    </div>
                    <div class="settings-item" id="themeSetting">
                        <div class="item-content">
                            <div class="item-icon">
                                <i class="fas fa-brush"></i>
                            </div>
                            <div class="item-text">
                                <div class="item-name">主题颜色</div>
                                <div class="item-desc">自定义界面主色调</div>
                            </div>
                        </div>
                        <div class="item-control">
                            <span class="value-text">粉雾主题</span>
                            <i class="fas fa-chevron-right arrow-icon"></i>
                        </div>
                    </div>
                    <div class="settings-item" id="wallpaperSetting">
                        <div class="item-content">
                            <div class="item-icon">
                                <i class="fas fa-image"></i>
                            </div>
                            <div class="item-text">
                                <div class="item-name">壁纸</div>
                                <div class="item-desc">设置锁屏和桌面壁纸</div>
                            </div>
                        </div>
                        <div class="item-control">
                            <i class="fas fa-chevron-right arrow-icon"></i>
                        </div>
                    </div>
                    <div class="settings-item" id="fontSetting">
                        <div class="item-content">
                            <div class="item-icon">
                                <i class="fas fa-font"></i>
                            </div>
                            <div class="item-text">
                                <div class="item-name">字体</div>
                                <div class="item-desc">系统字体大小和样式</div>
                            </div>
                        </div>
                        <div class="item-control">
                            <span class="value-text">默认字体</span>
                            <i class="fas fa-chevron-right arrow-icon"></i>
                        </div>
                    </div>
                </div>
                
                <!-- 关于本机 -->
                <div class="settings-section">
                    <div class="section-title">
                        <i class="fas fa-mobile-alt"></i>
                        关于本机
                    </div>
                    <div class="settings-item" id="deviceInfo">
                        <div class="item-content">
                            <div class="item-icon">
                                <i class="fas fa-info-circle"></i>
                            </div>
                            <div class="item-text">
                                <div class="item-name">设备信息</div>
                                <div class="item-desc">Blush Mist · 粉雾手机</div>
                            </div>
                        </div>
                        <div class="item-control">
                            <i class="fas fa-chevron-right arrow-icon"></i>
                        </div>
                    </div>
                    <div class="settings-item" id="softwareUpdate">
                        <div class="item-content">
                            <div class="item-icon">
                                <i class="fas fa-download"></i>
                            </div>
                            <div class="item-text">
                                <div class="item-name">软件更新</div>
                                <div class="item-desc">Blush OS 3.2.1 · 最新版本</div>
                            </div>
                        </div>
                        <div class="item-control">
                            <i class="fas fa-chevron-right arrow-icon"></i>
                        </div>
                    </div>
                    <div class="settings-item" id="storageInfo">
                        <div class="item-content">
                            <div class="item-icon">
                                <i class="fas fa-hdd"></i>
                            </div>
                            <div class="item-text">
                                <div class="item-name">存储空间</div>
                                <div class="item-desc">已用64GB / 总128GB</div>
                            </div>
                        </div>
                        <div class="item-control">
                            <i class="fas fa-chevron-right arrow-icon"></i>
                        </div>
                    </div>
                    <div class="settings-item" id="legalInfo">
                        <div class="item-content">
                            <div class="item-icon">
                                <i class="fas fa-gavel"></i>
                            </div>
                            <div class="item-text">
                                <div class="item-name">法律信息</div>
                                <div class="item-desc">许可证和条款</div>
                            </div>
                        </div>
                        <div class="item-control">
                            <i class="fas fa-chevron-right arrow-icon"></i>
                        </div>
                    </div>
                </div>
            </div>
            
            <nav class="ink-navbar">
                <div class="nav-item" data-app="phone" id="nav-phone">
                    <div class="nav-icon">
                        <i class="fas fa-phone"></i>
                    </div>
                    <div class="nav-name">电话</div>
                </div>
                
                <div class="nav-item" data-app="messages" id="nav-messages">
                    <div class="nav-icon">
                        <i class="fas fa-comment-dots"></i>
                    </div>
                    <div class="nav-name">信息</div>
                </div>
                
                <div class="nav-item" data-app="settings" id="nav-settings">
                    <div class="nav-icon">
                        <i class="fas fa-cog"></i>
                    </div>
                    <div class="nav-name">设置</div>
                </div>
                
                <!-- 天气导航项 -->
                <div class="nav-item" data-app="weather" id="nav-weather">
                    <div class="nav-icon">
                        <i class="fas fa-cloud-sun"></i>
                    </div>
                    <div class="nav-name">天气</div>
                </div>
                
                <div class="nav-item active" data-app="bbm" id="nav-bbm">
                    <div class="nav-icon">
                        <i class="fas fa-comments"></i>
                    </div>
                    <div class="nav-name">BBM</div>
                </div>
            </nav>
        </div>
        
        <div class="phone-button power-button"></div>
        <div class="phone-button volume-up"></div>
        <div class="phone-button volume-down"></div>
        <div class="home-button" id="physicalHomeButton">
            <i class="fas fa-circle"></i>
        </div>
    </div>

    <script>
        // 缓存DOM元素
        const DOM = {
            name: document.getElementById("name"),
            tag: document.getElementById("tag"),
            date: document.getElementById("date"),
            d: document.getElementById("d"),
            h: document.getElementById("h"),
            m: document.getElementById("m"),
            s: document.getElementById("s"),
            periodStatus: document.getElementById('period-status'),
            periodDay: document.getElementById('period-day'),
            periodNext: document.getElementById('period-next'),
            periodCountdown: document.getElementById('period-countdown'),
            periodWidget: document.getElementById('period-square-widget'),
            anniversaryWidget: document.getElementById('anniversary-widget'),
            appIcons: document.querySelectorAll('.app-icon-borderless'),
            navItems: document.querySelectorAll('.nav-item'),
            unlockSlider: document.getElementById('unlockSlider'),
            lockScreen: document.getElementById('lockScreen'),
            phoneContainer: document.getElementById('phoneContainer'),
            currentTime: document.getElementById('currentTime'),
            lockTime: document.getElementById('lockTime'),
            lockDate: document.getElementById('lockDate'),
            statusBar: document.getElementById('statusBar'),
            physicalHomeButton: document.getElementById('physicalHomeButton'),
            badgeWidget: document.getElementById('badge-large-widget'),
            badgeUploadInput: document.getElementById('badgeUploadInput'),
            badgeUploading: document.getElementById('badgeUploading'),
            homeScreen: document.getElementById('homeScreen'),
            settingsScreen: document.getElementById('settingsScreen'),
            backButton: document.getElementById('backButton'),
            screenEl: document.querySelector('.screen'),
            body: document.body
        };

        // 应用数据配置
        const APP_DATA = {
            anniversary: {
                NAME: "纪念日",
                TARGET: "2026-06-18",
                TYPE: "倒数日"
            },
            period: {
                currentDay: 3,
                totalDays: 7,
                nextDate: "9月28日",
                countdownDays: 14
            },
            messages: {
                calendar: '查看日历和安排日程',
                health: '跟踪健康状况和运动数据',
                ao3: '访问Archive of Our Own同人小说库',
                music: '播放音乐和创建播放列表',
                worldbook: '浏览全球图书和百科全书',
                blackbox: '探索神秘工具和实用功能',
                starselect: '收藏精选内容和个性化推荐',
                timelog: '记录时间和时间管理工具',
                phone: '拨打电话和查看通话记录',
                messages: '发送和查看短信',
                settings: '调整系统设置和偏好',
                weather: '查看实时天气和天气预报',
                bbm: 'BBM即时通讯服务'
            },
            appNames: {
                phone: '电话',
                messages: '信息', 
                settings: '设置',
                weather: '天气',
                bbm: 'BBM'
            }
        };

        // 状态管理
        const STATE = {
            isUnlocking: false,
            isFullscreen: false,
            unlockEventListenersAdded: false,
            unlockStartY: 0,
            unlockCurrentY: 0,
            resizeTimeout: null,
            currentScreen: 'home'
        };

        // 纪念日倒计时功能
        function updateAnniversary() {
            const target = new Date(APP_DATA.anniversary.TARGET).getTime();
            const now = Date.now();
            const diff = Math.max(0, target - now);
            
            DOM.d.textContent = Math.floor(diff / (1000 * 60 * 60 * 24)).toString().padStart(2, "0");
            DOM.h.textContent = Math.floor(diff % (1000 * 60 * 60 * 24) / (1000 * 60 * 60)).toString().padStart(2, "0");
            DOM.m.textContent = Math.floor(diff % (1000 * 60 * 60) / (1000 * 60)).toString().padStart(2, "0");
            DOM.s.textContent = Math.floor(diff % (1000 * 60) / 1000).toString().padStart(2, "0");
        }

        // 经期显示更新
        function updatePeriodDisplay() {
            const period = APP_DATA.period;
            
            DOM.periodDay.textContent = `第${period.currentDay}天`;
            DOM.periodNext.textContent = `下次: ${period.nextDate}`;
            const countdownInt = Math.floor(period.countdownDays);
            DOM.periodCountdown.textContent = countdownInt > 0 ? 
                `还有${countdownInt}天` : '即将到来';
            
            if (period.currentDay <= period.totalDays) {
                DOM.periodStatus.textContent = '经期中';
                DOM.periodWidget.classList.add('active');
            } else if (period.currentDay >= period.totalDays + 10 && 
                      period.currentDay <= period.totalDays + 14) {
                DOM.periodStatus.textContent = '排卵期';
                DOM.periodWidget.classList.remove('active');
            } else {
                DOM.periodStatus.textContent = '安全期';
                DOM.periodWidget.classList.remove('active');
            }
        }

        // 应用点击处理
        function handleAppClick(appElement) {
            const allApps = DOM.appIcons;
            allApps.forEach(app => app.classList.remove('active'));
            
            appElement.classList.add('active');
            appElement.style.transform = 'scale(0.95)';
            
            setTimeout(() => {
                appElement.style.transform = '';
            }, 150);
            
            const appData = appElement.getAttribute('data-app');
            const appName = appElement.querySelector('span').textContent;
            
            if (APP_DATA.messages[appData]) {
                alert(`打开 ${appName}\n${APP_DATA.messages[appData]}`);
            }
            
            setTimeout(() => {
                appElement.classList.remove('active');
            }, 3000);
        }

        // 导航栏点击处理
        function handleNavClick(navElement) {
            const appName = navElement.getAttribute('data-app');
            
            if (appName === 'settings') {
                showSettingsScreen();
            } else {
                DOM.navItems.forEach(nav => nav.classList.remove('active'));
                
                navElement.classList.add('active');
                navElement.style.transform = 'scale(0.95)';
                
                setTimeout(() => {
                    navElement.style.transform = 'scale(1)';
                }, 150);
                
                if (APP_DATA.messages[appName] && APP_DATA.appNames[appName]) {
                    alert(`打开 ${APP_DATA.appNames[appName]}\n${APP_DATA.messages[appName]}`);
                }
            }
        }

        // 显示设置页面
        function showSettingsScreen() {
            DOM.homeScreen.style.opacity = '0';
            DOM.homeScreen.style.pointerEvents = 'none';
            DOM.settingsScreen.classList.add('active');
            STATE.currentScreen = 'settings';
            
            const navBar = document.querySelector('.ink-navbar');
            navBar.style.display = 'none';
            
            DOM.navItems.forEach(nav => nav.classList.remove('active'));
            document.getElementById('nav-settings').classList.add('active');
        }

        // 返回主页
        function showHomeScreen() {
            DOM.settingsScreen.classList.remove('active');
            DOM.homeScreen.style.opacity = '1';
            DOM.homeScreen.style.pointerEvents = 'auto';
            STATE.currentScreen = 'home';
            
            const navBar = document.querySelector('.ink-navbar');
            navBar.style.display = 'flex';
        }

        // 时间更新
        function updateTime() {
            try {
                const now = new Date();
                const timeString = now.toLocaleTimeString('zh-CN', { 
                    hour: '2-digit', 
                    minute: '2-digit', 
                    hour12: false 
                });
                const dateString = now.toLocaleDateString('zh-CN', { 
                    weekday: 'long', 
                    year: 'numeric', 
                    month: 'long', 
                    day: 'numeric' 
                });
                
                DOM.currentTime.textContent = timeString;
                DOM.lockTime.textContent = timeString;
                DOM.lockDate.textContent = dateString;
            } catch (error) {
                console.error('更新时间时出错:', error);
            }
        }

        // 解锁功能
        function startUnlock(e) {
            STATE.isUnlocking = true;
            STATE.unlockStartY = e.type.includes('touch') ? e.touches[0].clientY : e.clientY;
            DOM.unlockSlider.style.transition = 'none';
            
            document.addEventListener('mousemove', moveUnlock);
            document.addEventListener('touchmove', moveUnlock, { passive: false });
            document.addEventListener('mouseup', endUnlock);
            document.addEventListener('touchend', endUnlock);
        }

        function moveUnlock(e) {
            if (!STATE.isUnlocking) return;
            
            e.preventDefault();
            STATE.unlockCurrentY = e.type.includes('touch') ? e.touches[0].clientY : e.clientY;
            const deltaY = STATE.unlockStartY - STATE.unlockCurrentY;
            
            if (deltaY > 0) {
                DOM.unlockSlider.style.transform = `translateY(-${Math.min(deltaY, 100)}px)`;
                
                if (deltaY > 80) {
                    unlockPhone();
                }
            }
        }

        function endUnlock() {
            if (!STATE.isUnlocking) return;
            
            STATE.isUnlocking = false;
            DOM.unlockSlider.style.transition = 'transform 0.3s';
            DOM.unlockSlider.style.transform = 'translateY(0)';
            
            document.removeEventListener('mousemove', moveUnlock);
            document.removeEventListener('touchmove', moveUnlock);
            document.removeEventListener('mouseup', endUnlock);
            document.removeEventListener('touchend', endUnlock);
        }

        function unlockPhone() {
            DOM.lockScreen.classList.add('hidden');
            DOM.unlockSlider.style.transform = 'translateY(0)';
            DOM.phoneContainer.classList.add('unlocked');
        }

        function lockPhone() {
            DOM.lockScreen.classList.remove('hidden');
            DOM.phoneContainer.classList.remove('unlocked');
        }

        // 计算并应用全屏缩放比例
        function updateFullscreenScale() {
            if (!STATE.isFullscreen) return;
            
            const originalWidth = 320;
            const originalHeight = 640;
            
            const screenWidth = window.innerWidth;
            const screenHeight = window.innerHeight;
            
            // 计算宽高各自的缩放比例，取较小值保证完整显示
            const scaleX = screenWidth / originalWidth;
            const scaleY = screenHeight / originalHeight;
            const scale = Math.min(scaleX, scaleY);
            
            // 应用缩放和居中
            DOM.phoneContainer.style.transform = `translate(-50%, -50%) scale(${scale})`;
        }

        // 全屏功能
        function toggleFullscreen() {
            STATE.isFullscreen = !STATE.isFullscreen;
            DOM.phoneContainer.classList.toggle('fullscreen', STATE.isFullscreen);
            DOM.body.classList.toggle('fullscreen-body', STATE.isFullscreen);
            
            if (STATE.isFullscreen) {
                unlockPhone();
                updateFullscreenScale();
            } else {
                // 退出全屏，重置 transform
                DOM.phoneContainer.style.transform = '';
            }
        }

        // 吧唧上传功能
        function handleBadgeUpload(e) {
            const file = e.target.files[0];
            if (!file) return;
            
            DOM.badgeUploading.style.display = 'block';
            
            const reader = new FileReader();
            reader.onload = function(event) {
                DOM.badgeWidget.style.backgroundImage = `url(${event.target.result})`;
                
                setTimeout(() => {
                    DOM.badgeUploading.style.display = 'none';
                    setTimeout(() => {
                        alert('吧唧图片已更新！');
                    }, 100);
                }, 500);
            };
            reader.readAsDataURL(file);
        }

        // 模拟经期数据更新
        function updatePeriodData() {
            const period = APP_DATA.period;
            period.currentDay = (period.currentDay % 35) + 1;
            period.countdownDays = Math.max(0, period.countdownDays - 1);
            
            if (period.countdownDays <= 0) {
                const nextDate = new Date();
                nextDate.setDate(nextDate.getDate() + 28);
                const month = nextDate.getMonth() + 1;
                const day = nextDate.getDate();
                period.nextDate = `${month}月${day}日`;
                period.countdownDays = 28;
            }
            
            updatePeriodDisplay();
        }

        // 设置项点击处理
        function handleSettingClick(settingElement, settingName) {
            settingElement.style.transform = 'scale(0.98)';
            
            setTimeout(() => {
                settingElement.style.transform = '';
            }, 150);
            
            const settingMessages = {
                'account': '账户管理\n登录、注销和管理您的粉雾账户',
                'sync': '数据同步设置\n自动同步联系人、日历和应用数据',
                'privacy': '隐私保护设置\n管理应用权限和个人数据隐私',
                'api': 'API 网络设置\n配置API接口地址和网络参数\n默认API：api.blush-mist.com\n状态：已连接',
                'asr': 'ASR 服务设置\n自动语音识别API配置\n支持语言：普通话、英语、日语\n识别准确率：98.2%\nAPI端点：asr.api.blush-mist.com\n状态：可用',
                'tts': 'TTS 服务设置\n文本转语音API配置\n语音库：自然语音、情感语音\n支持语言：中、英、日、韩\n语速：可调节\nAPI端点：tts.api.blush-mist.com\n状态：已连接',
                'owm': 'OWM 天气服务设置\nOpenWeatherMap API配置\nAPI密钥：已配置\n默认城市：自动定位\n单位：摄氏度\n更新频率：1小时\n状态：在线',
                'mt': 'MT 翻译服务设置\n机器翻译API配置\n支持语言对：中英、中日、中韩、英日等\n翻译引擎：神经网络翻译\nAPI端点：mt.api.blush-mist.com\n状态：运行中',
                'push': 'PUSH 推送服务设置\n推送通知API配置\n服务提供商：FCM/APNs\n推送类型：消息、提醒、更新\n频率限制：已配置\n状态：活跃',
                'darkmode': '深色模式设置\n自动或手动切换深色界面主题',
                'theme': '主题颜色设置\n选择您喜欢的界面主色调',
                'wallpaper': '壁纸设置\n选择锁屏和桌面壁纸',
                'font': '字体设置\n当前字体：默认字体\n可用字体：系统默认、圆体、楷体\n字体大小：中\n粗细：常规',
                'device': '设备信息\nBlush Mist 粉雾手机\n版本：Blush OS 3.2.1\n存储：128GB\n内存：8GB',
                'update': '软件更新\n当前版本：Blush OS 3.2.1\n已是最新版本',
                'storage': '存储空间管理\n已用64GB，可用64GB\n清理缓存和卸载应用',
                'legal': '法律信息\n查看软件许可证和用户协议'
            };
            
            if (settingMessages[settingName]) {
                alert(settingMessages[settingName]);
            }
        }

        // 设置开关变化处理
        function handleSettingToggle(toggleElement, settingName) {
            const settingMessages = {
                'sync': `数据同步 ${toggleElement.checked ? '已开启' : '已关闭'}`,
                'asr': `ASR服务 ${toggleElement.checked ? '已启用' : '已禁用'}`,
                'tts': `TTS服务 ${toggleElement.checked ? '已启用' : '已禁用'}`,
                'darkmode': `深色模式 ${toggleElement.checked ? '已开启' : '已关闭'}`
            };
            
            if (settingMessages[settingName]) {
                alert(settingMessages[settingName]);
            }
        }

        // 防抖函数
        function debounce(func, wait) {
            return function executedFunction(...args) {
                const later = () => {
                    clearTimeout(STATE.resizeTimeout);
                    func(...args);
                };
                clearTimeout(STATE.resizeTimeout);
                STATE.resizeTimeout = setTimeout(later, wait);
            };
        }

        // 事件监听器设置
        function setupEventListeners() {
            // 纪念日倒计时初始化
            DOM.name.textContent = APP_DATA.anniversary.NAME;
            DOM.tag.textContent = APP_DATA.anniversary.TYPE;
            DOM.date.textContent = `目标日期: ${APP_DATA.anniversary.TARGET}`;
            
            // 应用图标点击
            DOM.appIcons.forEach(icon => {
                icon.addEventListener('click', () => handleAppClick(icon));
            });
            
            // 导航栏点击
            DOM.navItems.forEach(item => {
                item.addEventListener('click', () => handleNavClick(item));
            });
            
            // 经期小组件点击
            DOM.periodWidget.addEventListener('click', function() {
                const period = APP_DATA.period;
                const status = period.currentDay <= period.totalDays ? '经期中' : 
                             (period.currentDay >= period.totalDays + 10 && 
                              period.currentDay <= period.totalDays + 14) ? '排卵期' : '安全期';
                
                alert(`经期助手\n状态：${status}\n当前：第${period.currentDay}天\n周期：${period.totalDays}天\n下次：${period.nextDate}\n剩余：${Math.floor(period.countdownDays)}天`);
            });
            
            // 纪念日小组件点击
            DOM.anniversaryWidget.addEventListener('click', function() {
                alert('纪念日倒计时\n距离纪念日还有161天\n目标日期：2026-06-18');
            });
            
            // 解锁功能
            DOM.unlockSlider.addEventListener('mousedown', startUnlock);
            DOM.unlockSlider.addEventListener('touchstart', startUnlock);
            
            // 锁屏双击锁定
            DOM.lockScreen.addEventListener('dblclick', lockPhone);
            
            // 物理Home键
            DOM.physicalHomeButton.addEventListener('click', function() {
                if (!DOM.lockScreen.classList.contains('hidden')) {
                    unlockPhone();
                } else {
                    if (STATE.currentScreen === 'settings') {
                        showHomeScreen();
                    } else {
                        DOM.navItems.forEach(nav => nav.classList.remove('active'));
                        document.getElementById('nav-bbm').classList.add('active');
                        alert('已返回主屏幕');
                    }
                }
            });
            
            // 吧唧上传
            DOM.badgeWidget.addEventListener('click', () => DOM.badgeUploadInput.click());
            DOM.badgeUploadInput.addEventListener('change', handleBadgeUpload);
            
            // 状态栏全屏切换
            DOM.statusBar.addEventListener('click', toggleFullscreen);
            
            // 设置页面返回按钮
            DOM.backButton.addEventListener('click', showHomeScreen);
            
            // 设置项点击 - 账户与同步
            document.getElementById('accountSetting').addEventListener('click', () => handleSettingClick(document.getElementById('accountSetting'), 'account'));
            document.getElementById('privacySetting').addEventListener('click', () => handleSettingClick(document.getElementById('privacySetting'), 'privacy'));
            
            // 设置项点击 - 网络与连接
            document.getElementById('apiSetting').addEventListener('click', () => handleSettingClick(document.getElementById('apiSetting'), 'api'));
            document.getElementById('asrSetting').addEventListener('click', () => handleSettingClick(document.getElementById('asrSetting'), 'asr'));
            document.getElementById('ttsSetting').addEventListener('click', () => handleSettingClick(document.getElementById('ttsSetting'), 'tts'));
            document.getElementById('owmSetting').addEventListener('click', () => handleSettingClick(document.getElementById('owmSetting'), 'owm'));
            document.getElementById('mtSetting').addEventListener('click', () => handleSettingClick(document.getElementById('mtSetting'), 'mt'));
            document.getElementById('pushSetting').addEventListener('click', () => handleSettingClick(document.getElementById('pushSetting'), 'push'));
            
            // 设置项点击 - 显示与主题
            document.getElementById('themeSetting').addEventListener('click', () => handleSettingClick(document.getElementById('themeSetting'), 'theme'));
            document.getElementById('wallpaperSetting').addEventListener('click', () => handleSettingClick(document.getElementById('wallpaperSetting'), 'wallpaper'));
            document.getElementById('fontSetting').addEventListener('click', () => handleSettingClick(document.getElementById('fontSetting'), 'font'));
            
            // 设置项点击 - 关于本机
            document.getElementById('deviceInfo').addEventListener('click', () => handleSettingClick(document.getElementById('deviceInfo'), 'device'));
            document.getElementById('softwareUpdate').addEventListener('click', () => handleSettingClick(document.getElementById('softwareUpdate'), 'update'));
            document.getElementById('storageInfo').addEventListener('click', () => handleSettingClick(document.getElementById('storageInfo'), 'storage'));
            document.getElementById('legalInfo').addEventListener('click', () => handleSettingClick(document.getElementById('legalInfo'), 'legal'));
            
            // 设置开关变化
            const syncToggle = document.getElementById('syncToggle');
            const darkModeToggle = document.getElementById('darkModeToggle');
            
            syncToggle.addEventListener('change', () => handleSettingToggle(syncToggle, 'sync'));
            darkModeToggle.addEventListener('change', () => handleSettingToggle(darkModeToggle, 'darkmode'));
            
            // 设置页面其他设置项点击
            const otherSettingItems = document.querySelectorAll('.settings-item:not([id])');
            otherSettingItems.forEach(item => {
                item.addEventListener('click', function() {
                    const itemName = this.querySelector('.item-name').textContent;
                    this.style.transform = 'scale(0.98)';
                    
                    setTimeout(() => {
                        this.style.transform = '';
                    }, 150);
                    
                    alert(`打开 ${itemName}\n这是 ${itemName} 设置页面`);
                });
            });
            
            // 窗口大小调整 - 更新全屏缩放
            window.addEventListener('resize', debounce(() => {
                if (STATE.isFullscreen) {
                    updateFullscreenScale();
                }
            }, 100));
        }

        // 初始化函数
        function init() {
            setupEventListeners();
            
            // 初始化时间
            updateTime();
            setInterval(updateTime, 1000);
            
            // 初始化倒计时
            updateAnniversary();
            setInterval(updateAnniversary, 1000);
            
            // 初始化经期显示
            updatePeriodDisplay();
            
            // 模拟经期数据更新
            setInterval(updatePeriodData, 30000);
        }

        // 启动应用
        init();
    </script>
</body>
</html>
